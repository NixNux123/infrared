<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1239px" preserveAspectRatio="none" style="width:613px;height:1239px;background:#FFFFFF;" version="1.1" viewBox="0 0 613 1239" width="613px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="67.2038" id="_title" style="stroke:none;stroke-width:1.0;" width="141" x="232" y="24.62"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="126" x="239.5" y="44.5859">Session Validation</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="131" x="237" y="63.6538">when under attack</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="4" x="300.5" y="82.7218">Â </text><rect fill="#FFFFFF" height="959.6142" style="stroke:#181818;stroke-width:1.0;" width="10" x="82" y="186.8917"/><rect fill="#FFFFFF" height="25" style="stroke:#181818;stroke-width:1.0;" width="10" x="87" y="668.4638"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="232" y="732.1698"/><rect fill="#FFFFFF" height="107.0999" style="stroke:#181818;stroke-width:1.0;" width="10" x="232" y="881.2879"/><rect fill="#FFFFFF" height="919.9082" style="stroke:#181818;stroke-width:1.0;" width="10" x="368" y="210.5977"/><rect fill="#FFFFFF" height="115.8241" style="stroke:#181818;stroke-width:1.0;" width="10" x="373" y="299.7157"/><rect fill="#FFFFFF" height="25" style="stroke:#181818;stroke-width:1.0;" width="10" x="373" y="817.5818"/><rect fill="#FFFFFF" height="25" style="stroke:#181818;stroke-width:1.0;" width="10" x="373" y="1066.7998"/><rect fill="#FFFFFF" height="99.118" style="stroke:#181818;stroke-width:1.0;" width="10" x="518" y="480.9518"/><rect fill="none" height="700.9661" style="stroke:#000000;stroke-width:1.5;" width="586" x="10" y="437.5398"/><rect fill="none" height="131.806" style="stroke:#000000;stroke-width:1.5;" width="398" x="20" y="896.2879"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="87" x2="87" y1="176.8917" y2="1155.5058"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="237" x2="237" y1="176.8917" y2="1155.5058"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="373" x2="373" y1="176.8917" y2="1155.5058"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="523" x2="523" y1="176.8917" y2="1155.5058"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="30" y="172.7897">Minecraft Client</text><ellipse cx="87" cy="106.3237" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M87,114.3237 L87,141.3237 M74,122.3237 L100,122.3237 M87,141.3237 L74,156.3237 M87,141.3237 L100,156.3237 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="30" y="1169.4718">Minecraft Client</text><ellipse cx="87" cy="1182.0738" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M87,1190.0738 L87,1217.0738 M74,1198.0738 L100,1198.0738 M87,1217.0738 L74,1232.0738 M87,1217.0738 L100,1232.0738 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="181" y="123.7558"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="211.5" y="145.7218">Mojang</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="188" y="164.7897">Session Server</text><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="181" y="1154.5058"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="211.5" y="1176.4718">Mojang</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="188" y="1195.5397">Session Server</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="338" y="142.8237"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="345" y="164.7897">Infrared</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="338" y="1154.5058"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="345" y="1176.4718">Infrared</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="460" y="142.8237"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="467" y="164.7897">Minecraft Server</text><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="460" y="1154.5058"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="467" y="1176.4718">Minecraft Server</text><rect fill="#FFFFFF" height="959.6142" style="stroke:#181818;stroke-width:1.0;" width="10" x="82" y="186.8917"/><rect fill="#FFFFFF" height="25" style="stroke:#181818;stroke-width:1.0;" width="10" x="87" y="668.4638"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="232" y="732.1698"/><rect fill="#FFFFFF" height="107.0999" style="stroke:#181818;stroke-width:1.0;" width="10" x="232" y="881.2879"/><rect fill="#FFFFFF" height="919.9082" style="stroke:#181818;stroke-width:1.0;" width="10" x="368" y="210.5977"/><rect fill="#FFFFFF" height="115.8241" style="stroke:#181818;stroke-width:1.0;" width="10" x="373" y="299.7157"/><rect fill="#FFFFFF" height="25" style="stroke:#181818;stroke-width:1.0;" width="10" x="373" y="817.5818"/><rect fill="#FFFFFF" height="25" style="stroke:#181818;stroke-width:1.0;" width="10" x="373" y="1066.7998"/><rect fill="#FFFFFF" height="99.118" style="stroke:#181818;stroke-width:1.0;" width="10" x="518" y="480.9518"/><polygon fill="#181818" points="356,206.5977,366,210.5977,356,214.5977,360,210.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="362" y1="210.5977" y2="210.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="99" y="204.7887">Handshake State=2</text><polygon fill="#181818" points="356,238.3037,366,242.3037,356,246.3037,360,242.3037" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="362" y1="242.3037" y2="242.3037"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="99" y="236.4947">Login Start</text><line style="stroke:#181818;stroke-width:1.0;" x1="378" x2="425" y1="286.7157" y2="286.7157"/><line style="stroke:#181818;stroke-width:1.0;" x1="425" x2="425" y1="286.7157" y2="299.7157"/><line style="stroke:#181818;stroke-width:1.0;" x1="384" x2="425" y1="299.7157" y2="299.7157"/><polygon fill="#181818" points="394,295.7157,384,299.7157,394,303.7157,390,299.7157" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="390" y="263.2007">Check if Player</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="390" y="280.9067">is already verified</text><path d="M388,317.7157 L388,380.7157 L557,380.7157 L557,327.7157 L547,317.7157 L388,317.7157 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M547,317.7157 L547,327.7157 L557,327.7157 L547,317.7157 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="394" y="336.6127">Check if the combination</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="394" y="354.3188">of Username and IP was</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="394" y="372.0248">already validated.</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="383" x2="425" y1="414.5398" y2="414.5398"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="425" x2="425" y1="414.5398" y2="427.5398"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="378" x2="425" y1="427.5398" y2="427.5398"/><polygon fill="#181818" points="388,423.5398,378,427.5398,388,431.5398,384,427.5398" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="390" y="408.7308">isVerified</text><path d="M10,437.5398 L73,437.5398 L73,447.2458 L63,457.2458 L10,457.2458 L10,437.5398 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="700.9661" style="stroke:#000000;stroke-width:1.5;" width="586" x="10" y="437.5398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="25" y="452.4368">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95" x="88" y="451.2987">[isVerified = true]</text><polygon fill="#181818" points="506,476.9518,516,480.9518,506,484.9518,510,480.9518" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378" x2="512" y1="480.9518" y2="480.9518"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="385" y="475.1428">Handshake State=2</text><polygon fill="#181818" points="506,508.6578,516,512.6578,506,516.6578,510,512.6578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="378" x2="512" y1="512.6578" y2="512.6578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="385" y="506.8488">Login Start</text><polygon fill="#FEFFDD" points="336,525.6578,559,525.6578,569,537.6578,559,550.6578,336,550.6578,326,537.6578,336,525.6578" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="392" y="543.5549">Start Proxy Tunnel</text><polygon fill="#181818" points="389,576.0699,379,580.0699,389,584.0699,385,580.0699" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="383" x2="522" y1="580.0699" y2="580.0699"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="395" y="574.2609">Player disconnects</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="596" y1="589.0699" y2="589.0699"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="97" x="15" y="600.8288">[isVerified = false]</text><polygon fill="#181818" points="103,624.7578,93,628.7578,103,632.7578,99,628.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97" x2="367" y1="628.7578" y2="628.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="109" y="622.9488">Encryption Key Request</text><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="139" y1="655.4638" y2="655.4638"/><line style="stroke:#181818;stroke-width:1.0;" x1="139" x2="139" y1="655.4638" y2="668.4638"/><line style="stroke:#181818;stroke-width:1.0;" x1="98" x2="139" y1="668.4638" y2="668.4638"/><polygon fill="#181818" points="108,664.4638,98,668.4638,108,672.4638,104,668.4638" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="104" y="649.6548">Generate Login Hash</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97" x2="139" y1="692.4638" y2="692.4638"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="139" x2="139" y1="692.4638" y2="705.4638"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="92" x2="139" y1="705.4638" y2="705.4638"/><polygon fill="#181818" points="102,701.4638,92,705.4638,102,709.4638,98,705.4638" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="220,728.1698,230,732.1698,220,736.1698,224,732.1698" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="226" y1="732.1698" y2="732.1698"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="99" y="726.3608">Set Login Hash</text><polygon fill="#181818" points="103,742.1698,93,746.1698,103,750.1698,99,746.1698" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97" x2="236" y1="746.1698" y2="746.1698"/><polygon fill="#181818" points="356,773.8758,366,777.8758,356,781.8758,360,777.8758" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="92" x2="362" y1="777.8758" y2="777.8758"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="99" y="772.0668">Encryption Key Response</text><line style="stroke:#181818;stroke-width:1.0;" x1="378" x2="425" y1="804.5818" y2="804.5818"/><line style="stroke:#181818;stroke-width:1.0;" x1="425" x2="425" y1="804.5818" y2="817.5818"/><line style="stroke:#181818;stroke-width:1.0;" x1="384" x2="425" y1="817.5818" y2="817.5818"/><polygon fill="#181818" points="394,813.5818,384,817.5818,394,821.5818,390,817.5818" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="390" y="798.7728">Generate Login Hash</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="383" x2="425" y1="841.5818" y2="841.5818"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="425" x2="425" y1="841.5818" y2="854.5818"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="378" x2="425" y1="854.5818" y2="854.5818"/><polygon fill="#181818" points="388,850.5818,378,854.5818,388,858.5818,384,854.5818" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="253,877.2879,243,881.2879,253,885.2879,249,881.2879" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="247" x2="367" y1="881.2879" y2="881.2879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="259" y="875.4789">Check Login Hash</text><path d="M20,896.2879 L83,896.2879 L83,905.9939 L73,915.9939 L20,915.9939 L20,896.2879 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="131.806" style="stroke:#000000;stroke-width:1.5;" width="398" x="20" y="896.2879"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="35" y="911.1849">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="80" x="98" y="910.0468">[Player Found]</text><polygon fill="#181818" points="356,935.6999,366,939.6999,356,943.6999,360,939.6999" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="242" x2="362" y1="939.6999" y2="939.6999"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="249" y="933.8909">Player Info</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="418" y1="948.6999" y2="948.6999"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="62" x="25" y="960.4588">[No Player]</text><polygon fill="#181818" points="356,984.3878,366,988.3878,356,992.3878,360,988.3878" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="237" x2="362" y1="988.3878" y2="988.3878"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="244" y="982.5788">No Player</text><polygon fill="#181818" points="103,1016.0938,93,1020.0938,103,1024.0938,99,1020.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97" x2="367" y1="1020.0938" y2="1020.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="109" y="1014.2848">Disconnect: Verification Failed</text><line style="stroke:#181818;stroke-width:1.0;" x1="378" x2="425" y1="1053.7998" y2="1053.7998"/><line style="stroke:#181818;stroke-width:1.0;" x1="425" x2="425" y1="1053.7998" y2="1066.7998"/><line style="stroke:#181818;stroke-width:1.0;" x1="384" x2="425" y1="1066.7998" y2="1066.7998"/><polygon fill="#181818" points="394,1062.7998,384,1066.7998,394,1070.7998,390,1066.7998" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="390" y="1047.9908">Verify Player</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="383" x2="425" y1="1090.7998" y2="1090.7998"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="425" x2="425" y1="1090.7998" y2="1103.7998"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="378" x2="425" y1="1103.7998" y2="1103.7998"/><polygon fill="#181818" points="388,1099.7998,378,1103.7998,388,1107.7998,384,1103.7998" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="103,1126.5058,93,1130.5058,103,1134.5058,99,1130.5058" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97" x2="372" y1="1130.5058" y2="1130.5058"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="109" y="1124.6968">Disconnect: Please Rejoin</text><rect fill="none" height="13.62" id="_title" style="stroke:none;stroke-width:1.0;" width="83" x="522" y="5"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="83" x="522" y="15.69">Session Validator</text><!--MD5=[d4bb3522c6a3832241f03ffacee00374]
@startuml session_validator

header Session Validator

title <b>Session Validation</b>\nwhen under attack\n

actor       "Minecraft Client"          as Client
participant "Mojang\nSession Server"    as Mojang
participant "Infrared"                  as Infrared
participant "Minecraft Server"          as Server

Client ++
Client -> Infrared ++ : Handshake State=2
Client -> Infrared : Login Start
Infrared -> Infrared ++ : Check if Player\nis already verified
note right Infrared: Check if the combination\nof Username and IP was\nalready validated.
return isVerified
alt isVerified = true
    Infrared -> Server ++ : Handshake State=2
    Infrared -> Server : Login Start
    hnote over Infrared, Server: Start Proxy Tunnel
    return Player disconnects
else isVerified = false
    Infrared - -> Client : Encryption Key Request
    Client -> Client ++ : Generate Login Hash
    return
    Client -> Mojang ++ : Set Login Hash
    return
    Client -> Infrared : Encryption Key Response
    Infrared -> Infrared ++ : Generate Login Hash
    return
    Infrared -> Mojang ++ : Check Login Hash
    alt Player Found
        Mojang - -> Infrared : Player Info
    else No Player
        return No Player
        Infrared - -> Client : Disconnect: Verification Failed
    end
    Infrared -> Infrared ++ : Verify Player
    return
    return Disconnect: Please Rejoin
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>